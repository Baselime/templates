dynamodb-consumed-write-capacity:
  type: query
  properties:
    name: Write Capacity
    description: How much write capacity you have consumed
    parameters:
      datasets:
        - cloudwatch-metrics
      calculations:
        - SUM(value.sum)
      filters:
        - $baselime.namespace = AWS/DynamoDB
        - metric_name = ConsumedWriteCapacityUnits
      groupBy:
        type: string
        value: dimensions.TableName
        limit: 10
        orderBy: SUM(value.sum)
        order: DESC

dynamodb-consumed-read-capacity:
  type: query
  properties:
    name: Read Capacity
    description: How much read capacity you have consumed
    parameters:
      datasets:
        - cloudwatch-metrics
      calculations:
        - SUM(value.sum)
      filters:
        - $baselime.namespace = AWS/DynamoDB
        - metric_name = ConsumedReadCapacityUnits
      groupBy:
        type: string
        value: dimensions.TableName
        limit: 10
        orderBy: SUM(value.sum)
        order: DESC
